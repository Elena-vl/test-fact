Необходимо реализовать следующий функционал:

Подсчет популярных товаров. Популярность = V + 3*B + 10*P - U. 

Подсчет должен логироваться в отдельной таблице или hl-блоке чтобы можно было проанализировать подсчет популярности.

Примечание: кол-во просмотров товара - предусмотреть защиту от накручивания, так чтобы при одной сессии проход не считался более одного раза.

V -  кол-во просмотров товара (проходов в деталку и просмотр более 5 секунд включительно) за последние полгода;

B - кол-во купленных и оплаченных товаров за последний год;

P - равно единице если количество картинок товара больше одной и нулю если нет;

U - негативное кол-во просмотров товара (проходов в деталку и просмотр менее 5 секунд) за последние полгода.

На странице вывода товаров доработать сортировку по популярности (создать компонент для размещения в списке товаров). 
